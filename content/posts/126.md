---
title: "使用数组"
date: 2024-03-12T19:46:23+08:00
---

## 定义数组

### 构造数组

使用 new 运算符调用 Array() 类型函数时，可以构造一个新数组。

```js
var a = new Array(); // 空数组
```

传递多个数值，可以创建一个实数组

```js
var a = new Array(1, true, "string", [1, 2], { x: 1, y: 2 });
```

传递一个数值参数，可以定义数组的长度，即包含元素的个数。

```js
var a = new Array(5); // ["", "", "", "", ""]
```

### 数组直接量

```js
var a = [];
var a = [1, true, "0", [1, 0], { x: 1, y: 0 }];
```

### 关联数组

如果数组的下标值超出范围，如负数、浮点数、布尔值、对象或其他值，JavaScript 会自动把它转换为一个字符串，并定义为关联数组。

在下面示例中，数组下标 false、true 将不会被强制转换为数值 0、1，JavaScript 会把变量 a 视为对象，false 和 true 转换的字符串被视为对象的属性名。

```js
var a = [];
a[false] = false;
a[true] = true;
console.log(a); // [false: false, true: true]
console.log(a[0]); // undefined
console.log(a[1]); // undefined
console.log(a[false]); // false
console.log(a[true]); // true
console.log(a["false"]); // false
console.log(a["true"]); // true
```

关联数组是一种数据格式，被称为哈希表，哈希表的数据检索速度要优于数组。

```js
var a = [
  ["张三", 1],
  ["李四", 2],
  ["王五", 3],
]; // 二维数组
for (var i in a) {
  if (a[i][0] == "李四") console.log(a[i][1]); // 2
}
```

如果使用文本下标会更为高效：

```js
var a = [];
a["张三"] = 1;
a["李四"] = 2;
a["王五"] = 3;
console.log(a["李四"]); // 快速定位检索
```

对象也可以作为数组的下标，Js 会试图把对象转换为数值，如果不行，则把它转换为字符串，然后以文本下标的形式进行操作。

```js
var a = [];
var b = function () {
  return 2;
};
a[b] = 1;
console.log(a);
console.log(a.length); // 0
console.log(a[b]); // 1
```

可以这样读取元素值

```js
var s = b.toString();
console.log(a[s]); // 1
```

还可以这样设计下标，此时为数组的元素，而不是关联属性了

```js
a[b()] = 1;
console.log(a[2]); // 1
console.log(a.length); // 3
```

[未完待续]